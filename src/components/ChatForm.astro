---
import IconPhoto from "./IconPhoto.astro";
---

<div
  class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700"
>
  <div class="max-w-4xl mx-auto p-4">
    <div class="preview-container"></div>
    <form>
      <div class="flex gap-4 items-center">
        <div class="flex-1 flex gap-2 items-center">
          <div class="flex items-center photo-container">
            <label
              class="cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"
            >
              <input type="file" accept="image/*" class="hidden" name="image" />
              <IconPhoto />
            </label>
          </div>
          <input
            type="text"
            name="message"
            placeholder="Type your message..."
            class="flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
            autocomplete="off"
          />
        </div>
        <button
          type="submit"
          class="rounded-lg bg-blue-600 px-6 py-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
        >
          Send
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  import { initializeChatForm } from "../libs/chatFormHandler";

  // Initialize the chat form handlers
  const cleanup = initializeChatForm();

  // Clean up event listeners when component is destroyed
  document.addEventListener("astro:unmount", cleanup);
</script>
